2025-07-05 19:55:11 [ERROR]: Unhandled Error
Error: Validasi deposit gagal: Jumlah deposit maksimal Rp 50.000.000
    at validateDepositRequest (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\validations\deposit.validation.js:41:19)
    at createDeposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\controllers\deposit.controller.js:8:38)
    at Layer.handleRequest (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\router\lib\route.js:157:13)
    at authMiddleware (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\auth\middlewares\auth.middleware.js:22:9)
    at Layer.handleRequest (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\router\lib\layer.js:152:17)
    at next (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\router\lib\route.js:157:13)
    at Route.dispatch (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\router\lib\route.js:117:3)
    at handle (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\router\index.js:435:11)
    at Layer.handleRequest (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\router\lib\layer.js:152:17)
Meta: {
  "error": "Validasi deposit gagal: Jumlah deposit maksimal Rp 50.000.000",
  "requestId": "f62981c8-67f4-4616-afcf-b1794e572800",
  "userId": 2,
  "method": "POST",
  "url": "/api/deposit/create",
  "ip": "::1",
  "userAgent": "PostmanRuntime/7.44.1",
  "body": "{\"amount\":55000,\"accountNumber\":\"ACC-1751614628279\",\"description\":\"Top-up saldo untuk kuota\",\"reference\":\"REF002\",\"userId\":2}",
  "query": "{}"
}
2025-07-05 19:55:11 [ERROR]: HTTP POST /api/deposit/create 400 11.043 ms - 1608 | User: 2 | ReqID: f62981c8-67f4-4616-afcf-b1794e572800
2025-07-05 19:56:28 [ERROR]: Unhandled Error
Error: Deposit tidak ditemukan
    at DepositService.getDeposits (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\services\deposit.service.js:99:19)
    at async getDeposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\controllers\deposit.controller.js:39:30)
Meta: {
  "error": "Deposit tidak ditemukan",
  "requestId": "faa9ab64-69eb-4617-b560-b3db500861ee",
  "userId": 2,
  "method": "GET",
  "url": "/api/deposit/",
  "ip": "::1",
  "userAgent": "PostmanRuntime/7.44.1",
  "body": null,
  "query": "{}"
}
2025-07-05 19:56:28 [ERROR]: HTTP GET /api/deposit/ 404 21.069 ms - 451 | User: 2 | ReqID: faa9ab64-69eb-4617-b560-b3db500861ee
2025-07-05 19:57:01 [ERROR]: Unhandled Error
Error: Deposit tidak ditemukan
    at DepositService.getDeposits (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\services\deposit.service.js:99:19)
    at async getDeposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\controllers\deposit.controller.js:39:30)
Meta: {
  "error": "Deposit tidak ditemukan",
  "requestId": "f4ca874d-7186-4c0c-82f5-b12fa6eaaf7d",
  "userId": 1,
  "method": "GET",
  "url": "/api/deposit/",
  "ip": "::1",
  "userAgent": "PostmanRuntime/7.44.1",
  "body": null,
  "query": "{}"
}
2025-07-05 19:57:01 [ERROR]: HTTP GET /api/deposit/ 404 7.493 ms - 451 | User: 1 | ReqID: f4ca874d-7186-4c0c-82f5-b12fa6eaaf7d
2025-07-05 19:57:58 [ERROR]: Unhandled Error
Error: Deposit tidak ditemukan
    at DepositService.getDeposits (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\services\deposit.service.js:99:19)
    at async getDeposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\controllers\deposit.controller.js:39:30)
Meta: {
  "error": "Deposit tidak ditemukan",
  "requestId": "e2f27f61-d476-4ded-ab15-46a205199a4c",
  "userId": 1,
  "method": "GET",
  "url": "/api/deposit/",
  "ip": "::1",
  "userAgent": "PostmanRuntime/7.44.1",
  "body": null,
  "query": "{}"
}
2025-07-05 19:57:58 [ERROR]: HTTP GET /api/deposit/ 404 27.385 ms - 451 | User: 1 | ReqID: e2f27f61-d476-4ded-ab15-46a205199a4c
2025-07-05 19:58:13 [ERROR]: Unhandled Error
Error: Deposit tidak ditemukan
    at DepositService.getDeposits (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\services\deposit.service.js:99:19)
    at async getDeposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\controllers\deposit.controller.js:39:30)
Meta: {
  "error": "Deposit tidak ditemukan",
  "requestId": "50281c71-fd85-47f4-94c1-280be7994f72",
  "userId": 1,
  "method": "GET",
  "url": "/api/deposit/",
  "ip": "::1",
  "userAgent": "PostmanRuntime/7.44.1",
  "body": null,
  "query": "{}"
}
2025-07-05 19:58:13 [ERROR]: HTTP GET /api/deposit/ 404 6.375 ms - 451 | User: 1 | ReqID: 50281c71-fd85-47f4-94c1-280be7994f72
2025-07-05 19:58:39 [ERROR]: Unhandled Error
Error: Rekening tidak ditemukan
    at DepositService.deposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\services\deposit.service.js:91:19)
    at async createDeposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\controllers\deposit.controller.js:15:28)
Meta: {
  "error": "Rekening tidak ditemukan",
  "requestId": "d4e368ca-d180-4e55-b42f-de5273235eef",
  "userId": 1,
  "method": "POST",
  "url": "/api/deposit/create",
  "ip": "::1",
  "userAgent": "PostmanRuntime/7.44.1",
  "body": "{\"amount\":55000,\"accountNumber\":\"ACC-1751614628279\",\"description\":\"Top-up saldo untuk aktivasi rekening\",\"reference\":\"REF001\",\"userId\":1}",
  "query": "{}"
}
2025-07-05 19:58:39 [ERROR]: HTTP POST /api/deposit/create 404 46.091 ms - 452 | User: 1 | ReqID: d4e368ca-d180-4e55-b42f-de5273235eef
2025-07-05 19:59:18 [ERROR]: Unhandled Error
Error: 
Invalid `client.transaction.create()` invocation in
C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\repositories\deposit.repository.js:64:41

  61 async createDepositTransaction(data, tx = null) {
  62     const client = tx || prisma;
  63 
→ 64     return await client.transaction.create({
           data: {
             transactionId: "DEP-20250705-56BED11B",
             type: "DEPOSIT",
             amount: 55000,
             balanceBefore: 0,
             balanceAfter: 55000,
             description: "Top-up saldo untuk aktivasi rekening",
             reference: "REF001",
             status: "PENDING",
             accountId: 1,
             userId: 1
           },
           amount: 55000,
           ~~~~~~
           balanceBefore: 0,
           balanceAfter: 55000
         })

Unknown argument `amount`. Available options are marked with ?.
    at DepositService.deposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\services\deposit.service.js:91:19)
    at async createDeposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\controllers\deposit.controller.js:15:28)
Meta: {
  "error": "\nInvalid `client.transaction.create()` invocation in\nC:\\Users\\myusu\\Documents\\JAMSTACK_JS\\projects\\syariahbanking\\src\\modules\\deposit\\repositories\\deposit.repository.js:64:41\n\n  61 async createDepositTransaction(data, tx = null) {\n  62     const client = tx || prisma;\n  63 \n→ 64     return await client.transaction.create({\n           data: {\n             transactionId: \"DEP-20250705-56BED11B\",\n             type: \"DEPOSIT\",\n             amount: 55000,\n             balanceBefore: 0,\n             balanceAfter: 55000,\n             description: \"Top-up saldo untuk aktivasi rekening\",\n             reference: \"REF001\",\n             status: \"PENDING\",\n             accountId: 1,\n             userId: 1\n           },\n           amount: 55000,\n           ~~~~~~\n           balanceBefore: 0,\n           balanceAfter: 55000\n         })\n\nUnknown argument `amount`. Available options are marked with ?.",
  "requestId": "1b4dfd08-2932-4e2c-804e-2e5f97459b67",
  "userId": 1,
  "method": "POST",
  "url": "/api/deposit/create",
  "ip": "::1",
  "userAgent": "PostmanRuntime/7.44.1",
  "body": "{\"amount\":55000,\"accountNumber\":\"ACC-1751720173649\",\"description\":\"Top-up saldo untuk aktivasi rekening\",\"reference\":\"REF001\",\"userId\":1}",
  "query": "{}"
}
2025-07-05 19:59:18 [ERROR]: HTTP POST /api/deposit/create 500 40.239 ms - 2294 | User: 1 | ReqID: 1b4dfd08-2932-4e2c-804e-2e5f97459b67
2025-07-05 20:26:17 [ERROR]: Unhandled Error
PrismaClientValidationError: 
Invalid `prisma.transaction.findMany()` invocation in
C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\repositories\deposit.repository.js:126:41

  123 }
  124 
  125 async getDepositByUser(userId) {
→ 126     return await prisma.transaction.findMany({
            where: {
              userId: 1,
              type: "DEPOSIT",
              status: "SUCCESS"
            },
            include: {
              account: {
                accountNumber: true,
                ~~~~~~~~~~~~~
                accountType: true,
                accountName: true,
                isActive: true
              }
            }
          })

Unknown argument `accountNumber`.
    at kn (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\@prisma\client\runtime\library.js:29:1363)
    at Xn.handleRequestError (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\@prisma\client\runtime\library.js:121:7102)
    at Xn.handleAndLogRequestError (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\@prisma\client\runtime\library.js:121:6784)
    at Xn.request (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\@prisma\client\runtime\library.js:121:6491)
    at async l (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\node_modules\@prisma\client\runtime\library.js:130:9812)
    at async DepositRepository.getDepositByUser (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\repositories\deposit.repository.js:126:16)
    at async DepositService.getDeposits (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\services\deposit.service.js:96:25)
    at async getDeposit (C:\Users\myusu\Documents\JAMSTACK_JS\projects\syariahbanking\src\modules\deposit\controllers\deposit.controller.js:39:30)
Meta: {
  "error": "\nInvalid `prisma.transaction.findMany()` invocation in\nC:\\Users\\myusu\\Documents\\JAMSTACK_JS\\projects\\syariahbanking\\src\\modules\\deposit\\repositories\\deposit.repository.js:126:41\n\n  123 }\n  124 \n  125 async getDepositByUser(userId) {\n→ 126     return await prisma.transaction.findMany({\n            where: {\n              userId: 1,\n              type: \"DEPOSIT\",\n              status: \"SUCCESS\"\n            },\n            include: {\n              account: {\n                accountNumber: true,\n                ~~~~~~~~~~~~~\n                accountType: true,\n                accountName: true,\n                isActive: true\n              }\n            }\n          })\n\nUnknown argument `accountNumber`.",
  "requestId": "0fd8d74e-eda7-47b4-9b7d-00627ab4687a",
  "userId": 1,
  "method": "GET",
  "url": "/api/deposit/",
  "ip": "::1",
  "userAgent": "PostmanRuntime/7.44.1",
  "body": null,
  "query": "{}"
}
2025-07-05 20:26:17 [ERROR]: HTTP GET /api/deposit/ 500 39.551 ms - 2867 | User: 1 | ReqID: 0fd8d74e-eda7-47b4-9b7d-00627ab4687a
